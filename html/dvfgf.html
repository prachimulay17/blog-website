<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AgriPredict ‚Äî Smart Farming Assistant (Wizard)</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b1724;
      --surface:rgba(255,255,255,0.08);
      --ink:#dbe7f4; --muted:#9fb3c8;
      --brand:#3ddc84; --accent:#8be9fd; --warn:#ffcf6d; --danger:#ff6b6b;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      color:var(--ink);
      background: radial-gradient(1200px 800px at 10% 10%, rgba(61,220,132,0.10), transparent 60%),
                  radial-gradient(1000px 700px at 90% 20%, rgba(139,233,253,0.10), transparent 60%),
                  radial-gradient(800px 600px at 50% 100%, rgba(255,207,109,0.10), transparent 60%),
                  var(--bg) url('https://images.unsplash.com/photo-1530639834082-05bafb67fbbe?q=80&w=1600&auto=format&fit=crop') center/cover fixed no-repeat;
    }
    .overlay{position:fixed;inset:0;background:linear-gradient(180deg, rgba(11,23,36,0.85) 0%, rgba(11,23,36,0.75) 30%, rgba(11,23,36,0.9) 100%); z-index:-1}

    header{display:flex;align-items:center;justify-content:space-between;gap:16px; padding:18px 24px; position:sticky; top:0; backdrop-filter: blur(8px); background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); border-bottom:1px solid rgba(255,255,255,0.12)}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:36px;height:36px;border-radius:12px;display:grid;place-items:center;background:linear-gradient(135deg, var(--brand), var(--accent)); color:#08220f;font-weight:900}
    .brand h1{font-family:Poppins, Inter; font-size:20px; margin:0}
    .tag{font-size:12px; color:var(--muted)}

    .container{display:grid; grid-template-columns: 1.2fr 1fr; gap:22px; max-width:1200px; margin:24px auto; padding:0 16px}

    .card{background:var(--surface); border:1px solid rgba(255,255,255,0.12); border-radius:18px; box-shadow: 0 10px 30px rgba(0,0,0,0.25); overflow:hidden}
    .card .head{padding:18px 18px 0 18px}
    .card h2{font-family:Poppins; margin:0; font-size:18px}
    .pane{padding:18px}

    .grid{display:grid; grid-template-columns:1fr 1fr; gap:14px}
    label{font-size:13px; opacity:0.9}
    input, select, textarea{width:100%; padding:12px 12px; border-radius:12px; border:1px solid rgba(255,255,255,0.16); background:rgba(255,255,255,0.08); color:var(--ink); outline:none}
    textarea{min-height:84px; resize:vertical}

    .row{display:flex; gap:12px; align-items:center}
    .btn{cursor:pointer; border:none; padding:12px 16px; border-radius:12px; font-weight:700; letter-spacing:.2px; color:#062012}
    .btn.primary{background:linear-gradient(135deg, var(--brand), #6df0b0)}
    .btn.ghost{background:transparent; color:var(--ink); border:1px dashed rgba(255,255,255,0.25)}

    /* wizard */
    .steps{display:grid; grid-template-columns: repeat(4, 1fr); gap:10px; padding:0 18px 12px}
    .step-badge{display:flex; flex-direction:column; align-items:center; gap:6px}
    .step-badge span{width:34px;height:34px;border-radius:999px;display:grid;place-items:center;background:rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.15); font-weight:800}
    .step-badge.active span{background:linear-gradient(135deg, var(--brand), #6df0b0); color:#072013; border-color:transparent}
    .step-badge label{font-size:12px;color:var(--muted)}
    .progress{height:10px; margin:10px 18px 0; background:rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.12); border-radius:999px; overflow:hidden}
    .progress > span{display:block; height:100%; width:0; background:linear-gradient(90deg, #9ae6b4, #34d399)}

    .step{display:none}
    .step.active{display:block}

    .wizardNav{display:flex; justify-content:space-between; gap:10px; padding:0 18px 18px}

    /* side */
    .aside{display:grid; gap:16px; align-content:start}
    .photo{position:relative; height:180px; border-radius:16px; overflow:hidden; border:1px solid rgba(255,255,255,0.14)}
    .photo img{width:100%; height:100%; object-fit:cover; transform:scale(1.06)}
    .photo::after{content:""; position:absolute; inset:0; box-shadow: inset 0 -40px 60px rgba(0,0,0,0.35)}
    .card.soft{background:rgba(255,255,255,0.06)}

    .stat{background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); border:1px solid rgba(255,255,255,0.12); border-radius:14px; padding:12px 14px}
    .stat .label{font-size:12px;color:var(--muted)}
    .stat .value{font-family:Poppins; font-size:20px; margin-top:6px}
    .kpi{display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; margin-top:12px}

    .badge{display:inline-block; padding:6px 10px; border-radius:999px; background:rgba(139,233,253,0.15); border:1px solid rgba(139,233,253,0.35); font-size:12px}
    .list{display:grid; gap:8px; margin:8px 0}
    .list div{padding:10px 12px; background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.12); border-radius:12px}
    .video-link a{display:inline-flex; align-items:center; gap:8px; text-decoration:none; color:#062012; background:linear-gradient(135deg, #ffcf6d, #ffd98e); padding:10px 12px; border-radius:10px; font-weight:700}
    .bar{height:12px; background:rgba(255,255,255,0.1); border-radius:999px; overflow:hidden}
    .bar > span{display:block; height:100%; background:linear-gradient(90deg, #9ae6b4, #34d399); width:0}

    footer{max-width:1200px; margin:30px auto 60px; padding:0 16px; color:var(--muted); text-align:center}

    @media (max-width: 980px){.container{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="overlay"></div>
  <header>
    <div class="brand">
      <div class="logo">üå±</div>
      <div>
        <h1>AgriPredict</h1>
        <div class="tag" id="tagline">Data‚Äëdriven assistant for every farmer</div>
      </div>
    </div>
    <div class="row">
      <label for="lang" class="tag" style="margin-right:8px">Language</label>
      <select id="lang" aria-label="Language">
        <option value="en" selected>English</option>
        <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
        <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)</option>
      </select>
    </div>
  </header>

  <main class="container">
    <!-- LEFT: Wizard -->
    <section class="card">
      <div class="head">
        <h2 id="wizardTitle">Step 1 ‚Äî Choose Language</h2>
        <div class="steps">
          <div class="step-badge" data-s="1"><span>1</span><label>Language</label></div>
          <div class="step-badge" data-s="2"><span>2</span><label>Details</label></div>
          <div class="step-badge" data-s="3"><span>3</span><label>Crop Info</label></div>
          <div class="step-badge" data-s="4"><span>4</span><label>Revenue</label></div>
        </div>
        <div class="progress"><span id="progressBar"></span></div>
      </div>

      <div class="pane">
        <!-- STEP 1: Language -->
        <div class="step active" id="step-1">
          <p class="tag" style="margin:0 0 10px">Select your preferred language to personalise the interface.</p>
          <div class="grid">
            <button class="btn primary" data-lang="en">English</button>
            <button class="btn ghost" data-lang="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
            <button class="btn ghost" data-lang="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</button>
          </div>
        </div>

        <!-- STEP 2: Farmer Details & Crop Selection -->
        <div class="step" id="step-2">
          <div class="grid">
            <div>
              <label id="nameLabel">Farmer Name</label>
              <input id="farmerName" placeholder="e.g., Ramesh Patil">
            </div>
            <div>
              <label id="regionLabel">Region / State</label>
              <input id="region" placeholder="e.g., Maharashtra">
            </div>
            <div>
              <label id="soilLabel">Soil Type</label>
              <select id="soil">
                <option value="loamy">Loamy</option>
                <option value="clay">Clay</option>
                <option value="sandy">Sandy</option>
                <option value="silt">Silt</option>
                <option value="black">Black Soil</option>
                <option value="red">Red Soil</option>
              </select>
            </div>
            <div>
              <label id="landLabel">Land Size (acres)</label>
              <input id="land" type="number" min="0" step="0.1" placeholder="e.g., 2.5">
            </div>
            <div>
              <label id="farmingTypeLabel">Farming Type</label>
              <select id="farmingType">
                <option value="crop">Crop</option>
                <option value="vegetable">Vegetable</option>
                <option value="fruit">Fruit</option>
                <option value="mixed">Mixed</option>
              </select>
            </div>
            <div>
              <label id="plantLabel">Select Crop / Plant</label>
              <select id="plant"></select>
            </div>
          </div>
        </div>

        <!-- STEP 3: Crop Details -->
        <div class="step" id="step-3">
          <div class="kpi">
            <div class="stat"><div class="label" id="durationLabel">Time Period</div><div class="value" id="durationVal">‚Äî</div></div>
            <div class="stat"><div class="label" id="yieldLabel">Expected Yield</div><div class="value" id="yieldVal">‚Äî</div></div>
            <div class="stat"><div class="label" id="priceLabel">Market Price</div><div class="value" id="priceVal">‚Äî</div></div>
          </div>

          <div class="details" style="margin-top:12px">
            <h3 id="aboutTitle">About the Crop</h3>
            <p id="aboutText">Crop‚Äëspecific guidance will appear here after analysis.</p>
            <div class="list" id="fertList"></div>
            <div class="list" id="pestList"></div>
            <div class="video-link" id="videoWrap" style="display:none">
              <a id="videoHref" href="#" target="_blank" rel="noopener">‚ñ∂ Step‚Äëby‚ÄëStep Video Guide</a>
            </div>
          </div>
        </div>

        <!-- STEP 4: Revenue Analysis -->
        <div class="step" id="step-4">
          <h3 style="margin:0 0 12px 0">Revenue Analysis (INR)</h3>
          <div class="grid">
            <div>
              <label>Expected Price / Quintal</label>
              <input id="price" type="number" min="0" step="10" placeholder="e.g., 2200">
            </div>
            <div>
              <label>Yield / Acre (Quintal)</label>
              <input id="yield" type="number" min="0" step="0.1" placeholder="e.g., 18">
            </div>
            <div>
              <label>Cost / Acre</label>
              <input id="cost" type="number" min="0" step="100" placeholder="e.g., 12000">
            </div>
          </div>
          <div class="kpi">
            <div class="stat"><div class="label">Gross Revenue</div><div class="value" id="gross">‚Äî</div></div>
            <div class="stat"><div class="label">Total Cost</div><div class="value" id="tcost">‚Äî</div></div>
            <div class="stat"><div class="label">Net Profit</div><div class="value" id="profit">‚Äî</div></div>
          </div>
          <div style="margin-top:10px"><div class="bar"><span id="profitBar"></span></div></div>
        </div>
      </div>

      <div class="wizardNav">
        <button class="btn ghost" id="backBtn">‚Üê Back</button>
        <div class="row">
          <button class="btn ghost" id="resetBtn">Reset</button>
          <button class="btn primary" id="nextBtn">Next ‚Üí</button>
        </div>
      </div>
    </section>

    <!-- RIGHT: Image Gallery & Tips -->
    <aside class="aside">
      <div class="photo"><img alt="Field at sunrise" src="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=1200&auto=format&fit=crop"/></div>
      <div class="photo"><img alt="Irrigation" src="https://images.unsplash.com/photo-1525610553991-2bede1a236e2?q=80&w=1200&auto=format&fit=crop"/></div>
      <div class="photo"><img alt="Wheat closeup" src="https://images.unsplash.com/photo-1500937386664-56b85b24b7c5?q=80&w=1200&auto=format&fit=crop"/></div>

      <div class="card soft">
        <div class="pane">
          <span class="badge">üåæ Smart Tips</span>
          <h3 style="margin-top:10px">Better Yield Checklist</h3>
          <div class="list">
            <div>Test soil every season; adjust N‚ÄëP‚ÄëK accordingly.</div>
            <div>Use certified seeds; follow recommended spacing.</div>
            <div>Install weather alerts; plan irrigation & spraying windows.</div>
            <div>Rotate crops to break pest/disease cycles.</div>
          </div>
        </div>
      </div>
    </aside>
  </main>

  <footer>Built for demos & hackathons ‚Ä¢ Replace sample data with live APIs and your backend.</footer>

  <script>
    // i18n
    const T = {
      en:{tagline:'Data‚Äëdriven assistant for every farmer', step1:'Step 1 ‚Äî Choose Language', step2:'Step 2 ‚Äî Enter Details & Select Crop', step3:'Step 3 ‚Äî Crop Details & Guidance', step4:'Step 4 ‚Äî Revenue Analysis', analyze:'Analyze', reset:'Reset', next:'Next ‚Üí', back:'‚Üê Back', aboutTitle:'About the Crop', aboutText:'Crop‚Äëspecific guidance will appear here after analysis.', duration:'Time Period', yield:'Expected Yield', price:'Market Price', nameLabel:'Farmer Name', regionLabel:'Region / State', soilLabel:'Soil Type', landLabel:'Land Size (acres)', farmingTypeLabel:'Farming Type', plantLabel:'Select Crop / Plant'},
      hi:{tagline:'‡§π‡§∞ ‡§ï‡§ø‡§∏‡§æ‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§°‡•á‡§ü‡§æ‚Äë‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§∏‡§π‡§æ‡§Ø‡§ï', step1:'‡§ö‡§∞‡§£ 1 ‚Äî ‡§≠‡§æ‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç', step2:'‡§ö‡§∞‡§£ 2 ‚Äî ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§≠‡§∞‡•á‡§Ç ‡§µ ‡§´‡§∏‡§≤ ‡§ö‡•Å‡§®‡•á‡§Ç', step3:'‡§ö‡§∞‡§£ 3 ‚Äî ‡§´‡§∏‡§≤ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§µ ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§®', step4:'‡§ö‡§∞‡§£ 4 ‚Äî ‡§∞‡§æ‡§ú‡§∏‡•ç‡§µ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£', analyze:'‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£', reset:'‡§∞‡•Ä‡§∏‡•á‡§ü', next:'‡§Ü‡§ó‡•á ‚Üí', back:'‚Üê ‡§™‡•Ä‡§õ‡•á', aboutTitle:'‡§´‡§∏‡§≤ ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç', aboutText:'‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§Ø‡§π‡§æ‡§Ç ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§¶‡§ø‡§ñ‡•á‡§ó‡•Ä‡•§', duration:'‡§∏‡§Æ‡§Ø ‡§Ö‡§µ‡§ß‡§ø', yield:'‡§â‡§™‡§ú (‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®‡§ø‡§§)', price:'‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø', nameLabel:'‡§ï‡§ø‡§∏‡§æ‡§® ‡§ï‡§æ ‡§®‡§æ‡§Æ', regionLabel:'‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ / ‡§∞‡§æ‡§ú‡•ç‡§Ø', soilLabel:'‡§Æ‡•É‡§¶‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞', landLabel:'‡§ú‡§Æ‡•Ä‡§® (‡§è‡§ï‡§°‡§º)', farmingTypeLabel:'‡§ñ‡•á‡§§‡•Ä ‡§ï‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞', plantLabel:'‡§´‡§∏‡§≤/‡§™‡•å‡§ß‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç'},
      mr:{tagline:'‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡•á‡§ï ‡§∂‡•á‡§§‡§ï‡§±‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§°‡•á‡§ü‡§æ‚Äë‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§∏‡§π‡§æ‡§Ø‡•ç‡§Ø‡§ï', step1:'‡§™‡§æ‡§Ø‡§∞‡•Ä 1 ‚Äî ‡§≠‡§æ‡§∑‡§æ ‡§®‡§ø‡§µ‡§°‡§æ', step2:'‡§™‡§æ‡§Ø‡§∞‡•Ä 2 ‚Äî ‡§§‡§™‡§∂‡•Ä‡§≤ ‡§≠‡§∞‡§æ ‡§µ ‡§™‡•Ä‡§ï ‡§®‡§ø‡§µ‡§°‡§æ', step3:'‡§™‡§æ‡§Ø‡§∞‡•Ä 3 ‚Äî ‡§™‡§ø‡§ï‡§æ‡§ö‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§µ ‡§Æ‡§æ‡§∞‡•ç‡§ó‡§¶‡§∞‡•ç‡§∂‡§®', step4:'‡§™‡§æ‡§Ø‡§∞‡•Ä 4 ‚Äî ‡§Æ‡§π‡§∏‡•Ç‡§≤ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£', analyze:'‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£', reset:'‡§∞‡•Ä‡§∏‡•á‡§ü', next:'‡§™‡•Å‡§¢‡•á ‚Üí', back:'‚Üê ‡§Æ‡§æ‡§ó‡•á', aboutTitle:'‡§™‡§ø‡§ï‡§æ‡§¨‡§¶‡•ç‡§¶‡§≤', aboutText:'‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£‡§æ‡§®‡§Ç‡§§‡§∞ ‡§Ø‡•á‡§•‡•á ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§¶‡§ø‡§∏‡•á‡§≤.', duration:'‡§ï‡§æ‡§≤‡§æ‡§µ‡§ß‡•Ä', yield:'‡§Ö‡§™‡•á‡§ï‡•ç‡§∑‡§ø‡§§ ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§®', price:'‡§¨‡§æ‡§ú‡§æ‡§∞‡§≠‡§æ‡§µ', nameLabel:'‡§∂‡•á‡§§‡§ï‡§±‡•ç‡§Ø‡§æ‡§ö‡•á ‡§®‡§æ‡§µ', regionLabel:'‡§™‡•ç‡§∞‡§¶‡•á‡§∂ / ‡§∞‡§æ‡§ú‡•ç‡§Ø', soilLabel:'‡§Æ‡§æ‡§§‡•Ä‡§ö‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞', landLabel:'‡§ú‡§Æ‡•Ä‡§® (‡§è‡§ï‡§∞)', farmingTypeLabel:'‡§∂‡•á‡§§‡•Ä ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞', plantLabel:'‡§™‡•Ä‡§ï/‡§µ‡§®‡§∏‡•ç‡§™‡§§‡•Ä ‡§®‡§ø‡§µ‡§°‡§æ'}
    };

    // dataset
    const CROPS = [
      {id:'wheat', type:'crop', name:'Wheat', duration:'110‚Äì130 days', yieldQtlPerAcre:18, pricePerQtl:2200, about:'Wheat thrives in cool, dry conditions with well‚Äëdrained loamy soil. Timely irrigation at CRI, tillering, and flowering stages is critical.', fertilizers:['Basal: DAP 100 kg/acre (or NPK 10:26:26 at soil‚Äëtest based rate)','Top dressing: Urea 45‚Äì50 kg/acre split at 20‚Äì25 & 45‚Äì50 DAS','Micro‚Äënutrients: Zinc sulphate if deficient'], pesticides:['Aphids: Imidacloprid 17.8% SL @ 0.25 ml/L','Rusts: Propiconazole 25% EC @ 1 ml/L','Termites: Chlorpyrifos 20% EC for seed treatment'], costPerAcre:12000, video:'https://www.youtube.com/watch?v=1GmLRuI0Rcc'},
      {id:'rice', type:'crop', name:'Rice (Paddy)', duration:'120‚Äì150 days', yieldQtlPerAcre:22, pricePerQtl:2100, about:'Rice needs standing water in early stages and warm climate. Maintain puddled field, ensure weed control during 20‚Äì45 DAS.', fertilizers:['Basal: 40:20:20 NPK kg/acre as per soil test','Top dressing: Urea split at active tillering & panicle initiation','Apply FYM/compost 1‚Äì2 tons/acre'], pesticides:['Stem borer: Chlorantraniliprole 18.5% SC @ label dose','BLB/Leaf blast: Tricyclazole/Validamycin as per label','Weeds: Pretilachlor pre‚Äëemergence'], costPerAcre:14000, video:'https://www.youtube.com/watch?v=4wT7bqB7VMI'},
      {id:'maize', type:'crop', name:'Maize', duration:'100‚Äì120 days', yieldQtlPerAcre:20, pricePerQtl:1900, about:'Maize prefers well‚Äëdrained loamy soil and good sunlight. Ensure proper spacing and nitrogen splits for better cobs.', fertilizers:['Basal: NPK 10:26:26 @ 50‚Äì60 kg/acre','Top dressing: Urea 50 kg/acre in two splits (25 & 45 DAS)','Boron/Zn if deficient'], pesticides:['Fall armyworm: Spinetoram/Emamectin as per label','Stem borer: Chlorantraniliprole granules','Herbicide: Atrazine pre‚Äëemergence if needed'], costPerAcre:11000, video:'https://www.youtube.com/watch?v=J-0v9NQv7Y8'},
      {id:'soy', type:'crop', name:'Soybean', duration:'90‚Äì110 days', yieldQtlPerAcre:10, pricePerQtl:4800, about:'Soybean requires warm weather and well‚Äëdrained soil. Seed treatment and timely weeding improve yield.', fertilizers:['Basal: SSP 100 kg/acre + FYM 1 ton/acre','Top: Urea is minimal; Rhizobium inoculation recommended','Sulphur 10 kg/acre if deficient'], pesticides:['Girdle beetle: Profenophos/Chlorpyrifos as per label','Rust: Tebuconazole @ 1 ml/L','Weeds: Imazethapyr post‚Äëemergence'], costPerAcre:10000, video:'https://www.youtube.com/watch?v=2E7I9q2uA-0'},
      {id:'tomato', type:'vegetable', name:'Tomato', duration:'110‚Äì130 days', yieldQtlPerAcre:80, pricePerQtl:900, about:'Tomato needs fertile, well‚Äëdrained soil and staking. Drip irrigation and mulching improve fruit quality.', fertilizers:['Basal: FYM 2 tons/acre + NPK 12:32:16','Top: Weekly fertigation with N & K during fruiting','Calcium/Boron sprays for blossom‚Äëend rot prevention'], pesticides:['Fruit borer: Emamectin @ label dose','Early/late blight: Mancozeb + Metalaxyl as per label','Whitefly/viral: Yellow sticky traps + Imidacloprid'], costPerAcre:45000, video:'https://www.youtube.com/watch?v=8j1cIu1H3mI'},
      {id:'potato', type:'vegetable', name:'Potato', duration:'90‚Äì110 days', yieldQtlPerAcre:70, pricePerQtl:1200, about:'Potato prefers cool climate and well‚Äëdrained friable soil. Earthing‚Äëup and disease management are key.', fertilizers:['Basal: NPK 10:26:26 + Potash as per soil test','Top: Urea in two splits before earthing‚Äëup','Use certified seed tubers'], pesticides:['Late blight: Cymoxanil + Mancozeb sprays','Cutworm: Chlorpyrifos baiting','Weeds: Metribuzin pre‚Äëemergence'], costPerAcre:38000, video:'https://www.youtube.com/watch?v=3QyngQmWg8w'}
    ];

    // elements
    const plantSel = document.getElementById('plant');
    const langSel = document.getElementById('lang');
    const titleEl = document.getElementById('wizardTitle');
    const pb = document.getElementById('progressBar');
    const backBtn = document.getElementById('backBtn');
    const nextBtn = document.getElementById('nextBtn');
    const resetBtn = document.getElementById('resetBtn');

    // populate crop options
    CROPS.forEach(c=>{const opt=document.createElement('option'); opt.value=c.id; opt.textContent=c.name; plantSel.appendChild(opt)});
    plantSel.value = CROPS[0].id;

    // helpers
    const fmt = n => n?.toLocaleString('en-IN');
    const qs = sel => document.querySelector(sel);
    const qsa = sel => Array.from(document.querySelectorAll(sel));

    // i18n apply
    function translate(lang){
      const tr=T[lang]||T.en;
      qs('#tagline').textContent=tr.tagline;
      titleEl.textContent = [tr.step1,tr.step2,tr.step3,tr.step4][currentStep-1];
      qs('#aboutTitle').textContent=tr.aboutTitle;
      qs('#aboutText').textContent=tr.aboutText;
      qs('#durationLabel').textContent=tr.duration;
      qs('#yieldLabel').textContent=tr.yield;
      qs('#priceLabel').textContent=tr.price;
      qs('#nameLabel').textContent=tr.nameLabel;
      qs('#regionLabel').textContent=tr.regionLabel;
      qs('#soilLabel').textContent=tr.soilLabel;
      qs('#landLabel').textContent=tr.landLabel;
      qs('#farmingTypeLabel').textContent=tr.farmingTypeLabel;
      qs('#plantLabel').textContent=tr.plantLabel;
      backBtn.textContent = tr.back; nextBtn.textContent = tr.next; resetBtn.textContent = tr.reset;
      // step badge labels
      const labels=['Language','Details','Crop Info','Revenue'];
      if(lang==='hi') labels.splice(0,4,'‡§≠‡§æ‡§∑‡§æ','‡§µ‡§ø‡§µ‡§∞‡§£','‡§´‡§∏‡§≤','‡§∞‡§æ‡§ú‡§∏‡•ç‡§µ');
      if(lang==='mr') labels.splice(0,4,'‡§≠‡§æ‡§∑‡§æ','‡§§‡§™‡§∂‡•Ä‡§≤','‡§™‡•Ä‡§ï','‡§Æ‡§π‡§∏‡•Ç‡§≤');
      qsa('.step-badge').forEach((el,i)=> el.querySelector('label').textContent=labels[i]);
    }

    langSel.addEventListener('change', e=> translate(e.target.value));

    // language quick buttons in step 1
    qsa('[data-lang]').forEach(btn=> btn.addEventListener('click', ()=>{
      langSel.value = btn.getAttribute('data-lang'); translate(langSel.value);
    }));

    // wizard logic
    let currentStep = 1; // 1..4
    function setProgress(){ pb.style.width = ((currentStep-1)/3*100)+'%'; }
    function updateBadges(){ qsa('.step-badge').forEach((b,i)=> b.classList.toggle('active', i < currentStep)); }
    function showStep(n){ currentStep = Math.max(1, Math.min(4, n)); qsa('.step').forEach(s=> s.classList.remove('active')); qs('#step-'+currentStep).classList.add('active'); const tr=T[langSel.value]||T.en; titleEl.textContent=[tr.step1,tr.step2,tr.step3,tr.step4][currentStep-1]; setProgress(); updateBadges(); backBtn.style.visibility = currentStep===1? 'hidden':'visible'; nextBtn.textContent = currentStep===4? 'Finish':'Next ‚Üí'; }

    backBtn.addEventListener('click', ()=> showStep(currentStep-1));
    nextBtn.addEventListener('click', ()=>{
      if(currentStep===1){ showStep(2); return; }
      if(currentStep===2){ analyze(); showStep(3); return; }
      if(currentStep===3){ showStep(4); return; }
      if(currentStep===4){ // finish => restart
        resetAll(); showStep(1); return;
      }
    });

    function resetAll(){
      document.querySelectorAll('input').forEach(i=> i.value='');
      qs('#fertList').innerHTML=''; qs('#pestList').innerHTML='';
      qs('#durationVal').textContent='‚Äî'; qs('#yieldVal').textContent='‚Äî'; qs('#priceVal').textContent='‚Äî';
      qs('#aboutText').textContent=(T[langSel.value]||T.en).aboutText;
      qs('#videoWrap').style.display='none'; qs('#profitBar').style.width='0%';
      qs('#gross').textContent='‚Äî'; qs('#tcost').textContent='‚Äî'; qs('#profit').textContent='‚Äî';
      plantSel.value=CROPS[0].id;
    }
    resetBtn.addEventListener('click', resetAll);

    // analysis
    function analyze(){
      const crop = CROPS.find(c=>c.id===plantSel.value) || CROPS[0];
      qs('#durationVal').textContent = crop.duration;
      qs('#yieldVal').textContent = crop.yieldQtlPerAcre + ' qtl/acre';
      qs('#priceVal').textContent = '‚Çπ ' + fmt(crop.pricePerQtl) + ' / qtl';
      qs('#aboutText').textContent = crop.about;
      qs('#fertList').innerHTML = '<span class="badge">üß™ Fertilizers</span>' + crop.fertilizers.map(f=>`<div>${f}</div>`).join('');
      qs('#pestList').innerHTML = '<span class="badge" style="background:rgba(255,107,107,0.15); border-color:rgba(255,107,107,0.35)">üêõ Pesticides</span>' + crop.pesticides.map(p=>`<div>${p}</div>`).join('');
      const vw = qs('#videoWrap'); const vh = qs('#videoHref'); vh.href = crop.video; vw.style.display='inline-block';
      // prefill revenue
      qs('#price').value=crop.pricePerQtl; qs('#yield').value=crop.yieldQtlPerAcre; qs('#cost').value=crop.costPerAcre; calcRevenue();
    }

    function calcRevenue(){
      const land = parseFloat(qs('#land').value||1);
      const price = parseFloat(qs('#price').value||0);
      const ypa = parseFloat(qs('#yield').value||0);
      const cost = parseFloat(qs('#cost').value||0);
      const gross = price * ypa * land; const totalCost = cost * land; const profit = gross - totalCost;
      qs('#gross').textContent = '‚Çπ ' + fmt(Math.round(gross));
      qs('#tcost').textContent = '‚Çπ ' + fmt(Math.round(totalCost));
      qs('#profit').textContent = (profit>=0? '‚Çπ '+fmt(Math.round(profit)) : '‚Äì ‚Çπ '+fmt(Math.abs(Math.round(profit))));
      const ratio = gross>0 ? Math.max(0, Math.min(1, profit/gross)) : 0; qs('#profitBar').style.width = (ratio*100)+'%';
    }
    ['price','yield','cost','land'].forEach(id=> document.getElementById(id).addEventListener('input', calcRevenue));

    // init
    translate('en'); showStep(1); updateBadges(); setProgress();
  </script>
</body>
</html>
